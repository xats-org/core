{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://xats.org/core/blocks/codeBlock",
  "title": "Code Block",
  "description": "A block for displaying code snippets with syntax highlighting",
  "type": "object",
  "properties": {
    "blockType": {
      "const": "https://xats.org/core/blocks/codeBlock",
      "description": "The URI identifier for this block type"
    },
    "content": {
      "type": "object",
      "properties": {
        "language": {
          "type": "string",
          "description": "The programming language of the code (e.g., 'python', 'javascript', 'java')"
        },
        "code": {
          "type": "string",
          "description": "The code snippet as a string"
        },
        "caption": {
          "$ref": "https://xats.org/schemas/0.1.0/xats.json#/definitions/SemanticText",
          "description": "Optional caption for the code block"
        }
      },
      "required": ["code"],
      "additionalProperties": false
    }
  },
  "required": ["blockType", "content"],
  "examples": [
    {
      "blockType": "https://xats.org/core/blocks/codeBlock",
      "content": {
        "language": "python",
        "code": "def fibonacci(n):\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n\n# Calculate the 10th Fibonacci number\nresult = fibonacci(10)\nprint(f\"The 10th Fibonacci number is: {result}\")",
        "caption": {
          "runs": [
            {
              "type": "text",
              "text": "Example 5.1: Recursive implementation of the Fibonacci sequence"
            }
          ]
        }
      }
    },
    {
      "blockType": "https://xats.org/core/blocks/codeBlock",
      "content": {
        "language": "javascript",
        "code": "const quickSort = (arr) => {\n  if (arr.length <= 1) return arr;\n  \n  const pivot = arr[Math.floor(arr.length / 2)];\n  const left = arr.filter(x => x < pivot);\n  const middle = arr.filter(x => x === pivot);\n  const right = arr.filter(x => x > pivot);\n  \n  return [...quickSort(left), ...middle, ...quickSort(right)];\n};"
      }
    }
  ]
}